"use strict";var _createClass=function(){function a(e,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||false;d.configurable=true;if("value" in d){d.writable=true}Object.defineProperty(e,d.key,d)}}return function(d,b,c){if(b){a(d.prototype,b)}if(c){a(d,c)}return d}}();function _possibleConstructorReturn(a,b){if(!a){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return b&&(typeof b==="object"||typeof b==="function")?b:a}function _inherits(b,a){if(typeof a!=="function"&&a!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:false,writable:true,configurable:true}});if(a){Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a}}function _classCallCheck(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}var Emitter=function(){function a(){_classCallCheck(this,a)}_createClass(a,[{key:"on",value:function c(f,e){this._callbacks=this._callbacks||{};if(!this._callbacks[f]){this._callbacks[f]=[]}this._callbacks[f].push(e);return this}},{key:"emit",value:function d(m){this._callbacks=this._callbacks||{};var h=this._callbacks[m];if(h){for(var k=arguments.length,i=Array(k>1?k-1:0),n=1;n<k;n++){i[n-1]=arguments[n]}for(var g=h,j=true,e=0,g=j?g:g[Symbol.iterator]();;){var f;if(j){if(e>=g.length){break}f=g[e++]}else{e=g.next();if(e.done){break}f=e.value}var l=f;l.apply(this,i)}}return this}},{key:"off",value:function b(e,h){if(!this._callbacks||arguments.length===0){this._callbacks={};return this}var j=this._callbacks[e];if(!j){return this}if(arguments.length===1){delete this._callbacks[e];return this}for(var g=0;g<j.length;g++){var f=j[g];if(f===h){j.splice(g,1);break}}return this}}]);return a}();var Dropzone=function(W){_inherits(I,W);_createClass(I,null,[{key:"initClass",value:function G(){this.prototype.Emitter=Emitter;this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"];this.prototype.defaultOptions={url:null,method:"post",withCredentials:false,timeout:30000,parallelUploads:2,uploadMultiple:false,chunking:false,forceChunking:false,chunkSize:2000000,parallelChunkUploads:false,retryChunks:false,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:true,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:0.8,resizeMethod:"contain",filesizeBase:1000,maxFiles:null,headers:null,clickable:true,ignoreHiddenFiles:true,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:true,autoQueue:true,addRemoveLinks:false,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:false,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function au(){},params:function aC(aU,aS,aT){if(aT){return{dzuuid:aT.file.upload.uuid,dzchunkindex:aT.index,dztotalfilesize:aT.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:aT.file.upload.totalChunkCount,dzchunkbyteoffset:aT.index*this.options.chunkSize}}},accept:function aG(aS,aT){return aT()},chunksUploaded:function aw(aS,aT){aT()},fallback:function az(){var aV=void 0;this.element.className=this.element.className+" dz-browser-not-supported";for(var aU=this.element.getElementsByTagName("div"),aT=true,aS=0,aU=aT?aU:aU[Symbol.iterator]();;){var aY;if(aT){if(aS>=aU.length){break}aY=aU[aS++]}else{aS=aU.next();if(aS.done){break}aY=aS.value}var aX=aY;if(/(^| )dz-message($| )/.test(aX.className)){aV=aX;aX.className="dz-message";break}}if(!aV){aV=I.createElement('<div class="dz-message"><span></span></div>');this.element.appendChild(aV)}var aW=aV.getElementsByTagName("span")[0];if(aW){if(aW.textContent!=null){aW.textContent=this.options.dictFallbackMessage}else{if(aW.innerText!=null){aW.innerText=this.options.dictFallbackMessage}}}return this.element.appendChild(this.getFallbackForm())},resize:function aP(aV,aX,aT,aS){var aY={srcX:0,srcY:0,srcWidth:aV.width,srcHeight:aV.height};var aW=aV.width/aV.height;if(aX==null&&aT==null){aX=aY.srcWidth;aT=aY.srcHeight}else{if(aX==null){aX=aT*aW}else{if(aT==null){aT=aX/aW}}}aX=Math.min(aX,aY.srcWidth);aT=Math.min(aT,aY.srcHeight);var aU=aX/aT;if(aY.srcWidth>aX||aY.srcHeight>aT){if(aS==="crop"){if(aW>aU){aY.srcHeight=aV.height;aY.srcWidth=aY.srcHeight*aU}else{aY.srcWidth=aV.width;aY.srcHeight=aY.srcWidth/aU}}else{if(aS==="contain"){if(aW>aU){aT=aX/aW}else{aX=aT*aW}}else{throw new Error("Unknown resizeMethod '"+aS+"'")}}}aY.srcX=(aV.width-aY.srcWidth)/2;aY.srcY=(aV.height-aY.srcHeight)/2;aY.trgWidth=aX;aY.trgHeight=aT;return aY},transformFile:function ah(aS,aT){if((this.options.resizeWidth||this.options.resizeHeight)&&aS.type.match(/image.*/)){return this.resizeImage(aS,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,aT)}else{return aT(aS)}},previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>',drop:function aR(aS){return this.element.classList.remove("dz-drag-hover")},dragstart:function aQ(aS){},dragend:function aH(aS){return this.element.classList.remove("dz-drag-hover")},dragenter:function at(aS){return this.element.classList.add("dz-drag-hover")},dragover:function an(aS){return this.element.classList.add("dz-drag-hover")},dragleave:function aB(aS){return this.element.classList.remove("dz-drag-hover")},paste:function ax(aS){},reset:function ao(){return this.element.classList.remove("dz-started")},addedfile:function ak(aZ){var a3=this;if(this.element===this.previewsContainer){this.element.classList.add("dz-started")}if(this.previewsContainer){aZ.previewElement=I.createElement(this.options.previewTemplate.trim());aZ.previewTemplate=aZ.previewElement;this.previewsContainer.appendChild(aZ.previewElement);for(var aV=aZ.previewElement.querySelectorAll("[data-dz-name]"),a4=true,aT=0,aV=a4?aV:aV[Symbol.iterator]();;){var aX;if(a4){if(aT>=aV.length){break}aX=aV[aT++]}else{aT=aV.next();if(aT.done){break}aX=aT.value}var aY=aX;aY.textContent=aZ.name}for(var aU=aZ.previewElement.querySelectorAll("[data-dz-size]"),a2=true,a7=0,aU=a2?aU:aU[Symbol.iterator]();;){if(a2){if(a7>=aU.length){break}aY=aU[a7++]}else{a7=aU.next();if(a7.done){break}aY=a7.value}aY.innerHTML=this.filesize(aZ.size)}if(this.options.addRemoveLinks){aZ._removeLink=I.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>");aZ.previewElement.appendChild(aZ._removeLink)}var a1=function a1(a8){a8.preventDefault();a8.stopPropagation();if(aZ.status===I.UPLOADING){return I.confirm(a3.options.dictCancelUploadConfirmation,function(){return a3.removeFile(aZ)})}else{if(a3.options.dictRemoveFileConfirmation){return I.confirm(a3.options.dictRemoveFileConfirmation,function(){return a3.removeFile(aZ)})}else{return a3.removeFile(aZ)}}};for(var aS=aZ.previewElement.querySelectorAll("[data-dz-remove]"),a0=true,a6=0,aS=a0?aS:aS[Symbol.iterator]();;){var aW;if(a0){if(a6>=aS.length){break}aW=aS[a6++]}else{a6=aS.next();if(a6.done){break}aW=a6.value}var a5=aW;a5.addEventListener("click",a1)}}},removedfile:function aN(aS){if(aS.previewElement!=null&&aS.previewElement.parentNode!=null){aS.previewElement.parentNode.removeChild(aS.previewElement)}return this._updateMaxFilesReachedClass()},thumbnail:function ar(aW,aS){if(aW.previewElement){aW.previewElement.classList.remove("dz-file-preview");for(var aU=aW.previewElement.querySelectorAll("[data-dz-thumbnail]"),aT=true,aX=0,aU=aT?aU:aU[Symbol.iterator]();;){var aY;if(aT){if(aX>=aU.length){break}aY=aU[aX++]}else{aX=aU.next();if(aX.done){break}aY=aX.value}var aV=aY;aV.alt=aW.name;aV.src=aS}return setTimeout(function(){return aW.previewElement.classList.add("dz-image-preview")},1)}},error:function aj(aT,aX){if(aT.previewElement){aT.previewElement.classList.add("dz-error");if(typeof aX!=="String"&&aX.error){aX=aX.error}for(var aS=aT.previewElement.querySelectorAll("[data-dz-errormessage]"),aY=true,aU=0,aS=aY?aS:aS[Symbol.iterator]();;){var aW;if(aY){if(aU>=aS.length){break}aW=aS[aU++]}else{aU=aS.next();if(aU.done){break}aW=aU.value}var aV=aW;aV.textContent=aX}}},errormultiple:function aL(){},processing:function ai(aS){if(aS.previewElement){aS.previewElement.classList.add("dz-processing");if(aS._removeLink){return aS._removeLink.textContent=this.options.dictCancelUpload}}},processingmultiple:function am(){},uploadprogress:function ap(aW,aT,aV){if(aW.previewElement){for(var aS=aW.previewElement.querySelectorAll("[data-dz-uploadprogress]"),aZ=true,aU=0,aS=aZ?aS:aS[Symbol.iterator]();;){var aX;if(aZ){if(aU>=aS.length){break}aX=aS[aU++]}else{aU=aS.next();if(aU.done){break}aX=aU.value}var aY=aX;aY.nodeName==="PROGRESS"?aY.value=aT:aY.style.width=aT+"%"}}},totaluploadprogress:function aA(){},sending:function aI(){},sendingmultiple:function aJ(){},success:function aq(aS){if(aS.previewElement){return aS.previewElement.classList.add("dz-success")}},successmultiple:function aE(){},canceled:function al(aS){return this.emit("error",aS,this.options.dictUploadCanceled)},canceledmultiple:function av(){},complete:function aO(aS){if(aS._removeLink){aS._removeLink.textContent=this.options.dictRemoveFile}if(aS.previewElement){return aS.previewElement.classList.add("dz-complete")}},completemultiple:function aF(){},maxfilesexceeded:function aM(){},maxfilesreached:function aK(){},queuecomplete:function aD(){},addedfiles:function ay(){}};this.prototype._thumbnailQueue=[];this.prototype._processingThumbnail=false}},{key:"extend",value:function ab(an){for(var ai=arguments.length,ar=Array(ai>1?ai-1:0),am=1;am<ai;am++){ar[am-1]=arguments[am]}for(var ap=ar,al=true,ao=0,ap=al?ap:ap[Symbol.iterator]();;){var ah;if(al){if(ao>=ap.length){break}ah=ap[ao++]}else{ao=ap.next();if(ao.done){break}ah=ao.value}var ak=ah;for(var aq in ak){var aj=ak[aq];an[aq]=aj}}return an}}]);function I(ak,ai){_classCallCheck(this,I);var an=_possibleConstructorReturn(this,(I.__proto__||Object.getPrototypeOf(I)).call(this));var am=void 0,al=void 0;an.element=ak;an.version=I.version;an.defaultOptions.previewTemplate=an.defaultOptions.previewTemplate.replace(/\n*/g,"");an.clickableElements=[];an.listeners=[];an.files=[];if(typeof an.element==="string"){an.element=document.querySelector(an.element)}if(!an.element||an.element.nodeType==null){throw new Error("Invalid dropzone element.")}if(an.element.dropzone){throw new Error("Dropzone already attached.")}I.instances.push(an);an.element.dropzone=an;var ah=(al=I.optionsForElement(an.element))!=null?al:{};an.options=I.extend({},an.defaultOptions,ah,ai!=null?ai:{});if(an.options.forceFallback||!I.isBrowserSupported()){var aj;return aj=an.options.fallback.call(an),_possibleConstructorReturn(an,aj)}if(an.options.url==null){an.options.url=an.element.getAttribute("action")}if(!an.options.url){throw new Error("No URL provided.")}if(an.options.acceptedFiles&&an.options.acceptedMimeTypes){throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.")}if(an.options.uploadMultiple&&an.options.chunking){throw new Error("You cannot set both: uploadMultiple and chunking.")}if(an.options.acceptedMimeTypes){an.options.acceptedFiles=an.options.acceptedMimeTypes;delete an.options.acceptedMimeTypes}if(an.options.renameFilename!=null){an.options.renameFile=function(ao){return an.options.renameFilename.call(an,ao.name,ao)}}an.options.method=an.options.method.toUpperCase();if((am=an.getExistingFallback())&&am.parentNode){am.parentNode.removeChild(am)}if(an.options.previewsContainer!==false){if(an.options.previewsContainer){an.previewsContainer=I.getElement(an.options.previewsContainer,"previewsContainer")}else{an.previewsContainer=an.element}}if(an.options.clickable){if(an.options.clickable===true){an.clickableElements=[an.element]}else{an.clickableElements=I.getElements(an.options.clickable,"clickable")}}an.init();return an}_createClass(I,[{key:"getAcceptedFiles",value:function A(){return this.files.filter(function(ah){return ah.accepted}).map(function(ah){return ah})}},{key:"getRejectedFiles",value:function F(){return this.files.filter(function(ah){return !ah.accepted}).map(function(ah){return ah})}},{key:"getFilesWithStatus",value:function V(ah){return this.files.filter(function(ai){return ai.status===ah}).map(function(ai){return ai})}},{key:"getQueuedFiles",value:function B(){return this.getFilesWithStatus(I.QUEUED)}},{key:"getUploadingFiles",value:function ac(){return this.getFilesWithStatus(I.UPLOADING)}},{key:"getAddedFiles",value:function x(){return this.getFilesWithStatus(I.ADDED)}},{key:"getActiveFiles",value:function e(){return this.files.filter(function(ah){return ah.status===I.UPLOADING||ah.status===I.QUEUED}).map(function(ah){return ah})}},{key:"init",value:function r(){var ao=this;if(this.element.tagName==="form"){this.element.setAttribute("enctype","multipart/form-data")}if(this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")){this.element.appendChild(I.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>"))}if(this.clickableElements.length){var ar=function ar(){if(ao.hiddenFileInput){ao.hiddenFileInput.parentNode.removeChild(ao.hiddenFileInput)}ao.hiddenFileInput=document.createElement("input");ao.hiddenFileInput.setAttribute("type","file");if(ao.options.maxFiles===null||ao.options.maxFiles>1){ao.hiddenFileInput.setAttribute("multiple","multiple")}ao.hiddenFileInput.className="dz-hidden-input";if(ao.options.acceptedFiles!==null){ao.hiddenFileInput.setAttribute("accept",ao.options.acceptedFiles)}if(ao.options.capture!==null){ao.hiddenFileInput.setAttribute("capture",ao.options.capture)}ao.hiddenFileInput.style.visibility="hidden";ao.hiddenFileInput.style.position="absolute";ao.hiddenFileInput.style.top="0";ao.hiddenFileInput.style.left="0";ao.hiddenFileInput.style.height="0";ao.hiddenFileInput.style.width="0";document.querySelector(ao.options.hiddenInputContainer).appendChild(ao.hiddenFileInput);return ao.hiddenFileInput.addEventListener("change",function(){var az=ao.hiddenFileInput.files;if(az.length){for(var ax=az,ay=true,aB=0,ax=ay?ax:ax[Symbol.iterator]();;){var aw;if(ay){if(aB>=ax.length){break}aw=ax[aB++]}else{aB=ax.next();if(aB.done){break}aw=aB.value}var aA=aw;ao.addFile(aA)}}ao.emit("addedfiles",az);return ar()})};ar()}this.URL=window.URL!==null?window.URL:window.webkitURL;for(var al=this.events,au=true,at=0,al=au?al:al[Symbol.iterator]();;){var av;if(au){if(at>=al.length){break}av=al[at++]}else{at=al.next();if(at.done){break}av=at.value}var am=av;this.on(am,this.options[am])}this.on("uploadprogress",function(){return ao.updateTotalUploadProgress()});this.on("removedfile",function(){return ao.updateTotalUploadProgress()});this.on("canceled",function(aw){return ao.emit("complete",aw)});this.on("complete",function(aw){if(ao.getAddedFiles().length===0&&ao.getUploadingFiles().length===0&&ao.getQueuedFiles().length===0){return setTimeout(function(){return ao.emit("queuecomplete")},0)}});var ap=function ap(aw){aw.stopPropagation();if(aw.preventDefault){return aw.preventDefault()}else{return aw.returnValue=false}};this.listeners=[{element:this.element,events:{dragstart:function ah(aw){return ao.emit("dragstart",aw)},dragenter:function an(aw){ap(aw);return ao.emit("dragenter",aw)},dragover:function ak(ay){var ax=void 0;try{ax=ay.dataTransfer.effectAllowed}catch(aw){}ay.dataTransfer.dropEffect="move"===ax||"linkMove"===ax?"move":"copy";ap(ay);return ao.emit("dragover",ay)},dragleave:function aq(aw){return ao.emit("dragleave",aw)},drop:function aj(aw){ap(aw);return ao.drop(aw)},dragend:function ai(aw){return ao.emit("dragend",aw)}}}];this.clickableElements.forEach(function(aw){return ao.listeners.push({element:aw,events:{click:function ax(ay){if(aw!==ao.element||ay.target===ao.element||I.elementInside(ay.target,ao.element.querySelector(".dz-message"))){ao.hiddenFileInput.click()}return true}}})});this.enable();return this.options.init.call(this)}},{key:"destroy",value:function n(){this.disable();this.removeAllFiles(true);if(this.hiddenFileInput!=null?this.hiddenFileInput.parentNode:undefined){this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput);this.hiddenFileInput=null}delete this.element.dropzone;return I.instances.splice(I.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function P(){var ah=void 0;var ai=0;var ak=0;var am=this.getActiveFiles();if(am.length){for(var al=this.getActiveFiles(),ao=true,an=0,al=ao?al:al[Symbol.iterator]();;){var ap;if(ao){if(an>=al.length){break}ap=al[an++]}else{an=al.next();if(an.done){break}ap=an.value}var aj=ap;ai+=aj.upload.bytesSent;ak+=aj.upload.total}ah=100*ai/ak}else{ah=100}return this.emit("totaluploadprogress",ah,ak,ai)}},{key:"_getParamName",value:function b(ah){if(typeof this.options.paramName==="function"){return this.options.paramName(ah)}else{return""+this.options.paramName+(this.options.uploadMultiple?"["+ah+"]":"")}}},{key:"_renameFile",value:function L(ah){if(typeof this.options.renameFile!=="function"){return ah.name}return this.options.renameFile(ah)}},{key:"getFallbackForm",value:function h(){var ai=void 0,aj=void 0;if(ai=this.getExistingFallback()){return ai}var ak='<div class="dz-fallback">';if(this.options.dictFallbackText){ak+="<p>"+this.options.dictFallbackText+"</p>"}ak+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':undefined)+' /><input type="submit" value="Upload!"></div>';var ah=I.createElement(ak);if(this.element.tagName!=="FORM"){aj=I.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>');aj.appendChild(ah)}else{this.element.setAttribute("enctype","multipart/form-data");this.element.setAttribute("method",this.options.method)}return aj!=null?aj:ah}},{key:"getExistingFallback",value:function Q(){var ak=function ak(ar){for(var ao=ar,am=true,an=0,ao=am?ao:ao[Symbol.iterator]();;){var ap;if(am){if(an>=ao.length){break}ap=ao[an++]}else{an=ao.next();if(an.done){break}ap=an.value}var aq=ap;if(/(^| )fallback($| )/.test(aq.className)){return aq}}};var ai=["div","form"];for(var ah=0;ah<ai.length;ah++){var aj=ai[ah];var al;if(al=ak(this.element.getElementsByTagName(aj))){return al}}}},{key:"setupEventListeners",value:function f(){return this.listeners.map(function(ah){return function(){var ai=[];for(var aj in ah.events){var ak=ah.events[aj];ai.push(ah.element.addEventListener(aj,ak,false))}return ai}()})}},{key:"removeEventListeners",value:function k(){return this.listeners.map(function(ah){return function(){var ai=[];for(var aj in ah.events){var ak=ah.events[aj];ai.push(ah.element.removeEventListener(aj,ak,false))}return ai}()})}},{key:"disable",value:function S(){var ah=this;this.clickableElements.forEach(function(ai){return ai.classList.remove("dz-clickable")});this.removeEventListeners();this.disabled=true;return this.files.map(function(ai){return ah.cancelUpload(ai)})}},{key:"enable",value:function Y(){delete this.disabled;this.clickableElements.forEach(function(ah){return ah.classList.add("dz-clickable")});return this.setupEventListeners()}},{key:"filesize",value:function M(ak){var al=0;var an="b";if(ak>0){var ai=["tb","gb","mb","kb","b"];for(var aj=0;aj<ai.length;aj++){var am=ai[aj];var ah=Math.pow(this.options.filesizeBase,4-aj)/10;if(ak>=ah){al=ak/Math.pow(this.options.filesizeBase,4-aj);an=am;break}}al=Math.round(10*al)/10}return"<strong>"+al+"</strong> "+this.options.dictFileSizeUnits[an]}},{key:"_updateMaxFilesReachedClass",value:function u(){if(this.options.maxFiles!=null&&this.getAcceptedFiles().length>=this.options.maxFiles){if(this.getAcceptedFiles().length===this.options.maxFiles){this.emit("maxfilesreached",this.files)}return this.element.classList.add("dz-max-files-reached")}else{return this.element.classList.remove("dz-max-files-reached")}}},{key:"drop",value:function E(ak){if(!ak.dataTransfer){return}this.emit("drop",ak);var aj=[];for(var ai=0;ai<ak.dataTransfer.files.length;ai++){aj[ai]=ak.dataTransfer.files[ai]}this.emit("addedfiles",aj);if(aj.length){var ah=ak.dataTransfer.items;if(ah&&ah.length&&ah[0].webkitGetAsEntry!=null){this._addFilesFromItems(ah)}else{this.handleFiles(aj)}}}},{key:"paste",value:function N(ai){if(__guard__(ai!=null?ai.clipboardData:undefined,function(aj){return aj.items})==null){return}this.emit("paste",ai);var ah=ai.clipboardData.items;if(ah.length){return this._addFilesFromItems(ah)}}},{key:"handleFiles",value:function J(ak){for(var ah=ak,am=true,al=0,ah=am?ah:ah[Symbol.iterator]();;){var ai;if(am){if(al>=ah.length){break}ai=ah[al++]}else{al=ah.next();if(al.done){break}ai=al.value}var aj=ai;this.addFile(aj)}}},{key:"_addFilesFromItems",value:function c(ah){var ai=this;return function(){var ak=[];for(var aj=ah,ap=true,ao=0,aj=ap?aj:aj[Symbol.iterator]();;){var al;if(ap){if(ao>=aj.length){break}al=aj[ao++]}else{ao=aj.next();if(ao.done){break}al=ao.value}var an=al;var am;if(an.webkitGetAsEntry!=null&&(am=an.webkitGetAsEntry())){if(am.isFile){ak.push(ai.addFile(an.getAsFile()))}else{if(am.isDirectory){ak.push(ai._addFilesFromDirectory(am,am.name))}else{ak.push(undefined)}}}else{if(an.getAsFile!=null){if(an.kind==null||an.kind==="file"){ak.push(ai.addFile(an.getAsFile()))}else{ak.push(undefined)}}else{ak.push(undefined)}}}return ak}()}},{key:"_addFilesFromDirectory",value:function z(ah,am){var ak=this;var al=ah.createReader();var aj=function aj(an){return __guardMethod__(console,"log",function(ao){return ao.log(an)})};var ai=function ai(){return al.readEntries(function(an){if(an.length>0){for(var at=an,ar=true,aq=0,at=ar?at:at[Symbol.iterator]();;){var ao;if(ar){if(aq>=at.length){break}ao=at[aq++]}else{aq=at.next();if(aq.done){break}ao=aq.value}var ap=ao;if(ap.isFile){ap.file(function(au){if(ak.options.ignoreHiddenFiles&&au.name.substring(0,1)==="."){return}au.fullPath=am+"/"+au.name;return ak.addFile(au)})}else{if(ap.isDirectory){ak._addFilesFromDirectory(ap,am+"/"+ap.name)}}}ai()}return null},aj)};return ai()}},{key:"accept",value:function T(ai,ah){if(this.options.maxFilesize&&ai.size>this.options.maxFilesize*1024*1024){return ah(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(ai.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize))}else{if(!I.isValidFile(ai,this.options.acceptedFiles)){return ah(this.options.dictInvalidFileType)}else{if(this.options.maxFiles!=null&&this.getAcceptedFiles().length>=this.options.maxFiles){ah(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles));return this.emit("maxfilesexceeded",ai)}else{return this.options.accept.call(this,ai,ah)}}}}},{key:"addFile",value:function j(ai){var ah=this;ai.upload={uuid:I.uuidv4(),progress:0,total:ai.size,bytesSent:0,filename:this._renameFile(ai),chunked:this.options.chunking&&(this.options.forceChunking||ai.size>this.options.chunkSize),totalChunkCount:Math.ceil(ai.size/this.options.chunkSize)};this.files.push(ai);ai.status=I.ADDED;this.emit("addedfile",ai);this._enqueueThumbnail(ai);return this.accept(ai,function(aj){if(aj){ai.accepted=false;ah._errorProcessing([ai],aj)}else{ai.accepted=true;if(ah.options.autoQueue){ah.enqueueFile(ai)}}return ah._updateMaxFilesReachedClass()})}},{key:"enqueueFiles",value:function w(aj){for(var am=aj,al=true,ak=0,am=al?am:am[Symbol.iterator]();;){var ah;if(al){if(ak>=am.length){break}ah=am[ak++]}else{ak=am.next();if(ak.done){break}ah=ak.value}var ai=ah;this.enqueueFile(ai)}return null}},{key:"enqueueFile",value:function K(ai){var ah=this;if(ai.status===I.ADDED&&ai.accepted===true){ai.status=I.QUEUED;if(this.options.autoProcessQueue){return setTimeout(function(){return ah.processQueue()},0)}}else{throw new Error("This file can't be queued because it has already been processed or was rejected.")}}},{key:"_enqueueThumbnail",value:function t(ah){var ai=this;if(this.options.createImageThumbnails&&ah.type.match(/image.*/)&&ah.size<=this.options.maxThumbnailFilesize*1024*1024){this._thumbnailQueue.push(ah);return setTimeout(function(){return ai._processThumbnailQueue()},0)}}},{key:"_processThumbnailQueue",value:function O(){var ai=this;if(this._processingThumbnail||this._thumbnailQueue.length===0){return}this._processingThumbnail=true;var ah=this._thumbnailQueue.shift();return this.createThumbnail(ah,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,true,function(aj){ai.emit("thumbnail",ah,aj);ai._processingThumbnail=false;return ai._processThumbnailQueue()})}},{key:"removeFile",value:function ae(ah){if(ah.status===I.UPLOADING){this.cancelUpload(ah)}this.files=without(this.files,ah);this.emit("removedfile",ah);if(this.files.length===0){return this.emit("reset")}}},{key:"removeAllFiles",value:function af(am){if(am==null){am=false}for(var ak=this.files.slice(),aj=true,ai=0,ak=aj?ak:ak[Symbol.iterator]();;){var al;if(aj){if(ai>=ak.length){break}al=ak[ai++]}else{ai=ak.next();if(ai.done){break}al=ai.value}var ah=al;if(ah.status!==I.UPLOADING||am){this.removeFile(ah)}}return null}},{key:"resizeImage",value:function aa(ai,aj,ah,al,am){var ak=this;return this.createThumbnail(ai,aj,ah,al,false,function(aq,an){if(an==null){return am(ai)}else{var ao=ak.options.resizeMimeType;if(ao==null){ao=ai.type}var ap=an.toDataURL(ao,ak.options.resizeQuality);if(ao==="image/jpeg"||ao==="image/jpg"){ap=ExifRestore.restore(ai.dataURL,ap)}return am(I.dataURItoBlob(ap))}})}},{key:"createThumbnail",value:function a(ak,al,ah,an,aj,ao){var am=this;var ai=new FileReader();ai.onload=function(){ak.dataURL=ai.result;if(ak.type==="image/svg+xml"){if(ao!=null){ao(ai.result)}return}return am.createThumbnailFromUrl(ak,al,ah,an,aj,ao)};return ai.readAsDataURL(ak)}},{key:"createThumbnailFromUrl",value:function l(ai,ah,ap,aj,am,ao,an){var ak=this;var al=document.createElement("img");if(an){al.crossOrigin=an}al.onload=function(){var aq=function aq(ar){return ar(1)};if(typeof EXIF!=="undefined"&&EXIF!==null&&am){aq=function aq(ar){return EXIF.getData(al,function(){return ar(EXIF.getTag(this,"Orientation"))})}}return aq(function(au){ai.width=al.width;ai.height=al.height;var aw=ak.options.resize.call(ak,ai,ah,ap,aj);var av=document.createElement("canvas");var at=av.getContext("2d");av.width=aw.trgWidth;av.height=aw.trgHeight;if(au>4){av.width=aw.trgHeight;av.height=aw.trgWidth}switch(au){case 2:at.translate(av.width,0);at.scale(-1,1);break;case 3:at.translate(av.width,av.height);at.rotate(Math.PI);break;case 4:at.translate(0,av.height);at.scale(1,-1);break;case 5:at.rotate(0.5*Math.PI);at.scale(1,-1);break;case 6:at.rotate(0.5*Math.PI);at.translate(0,-av.height);break;case 7:at.rotate(0.5*Math.PI);at.translate(av.width,-av.height);at.scale(-1,1);break;case 8:at.rotate(-0.5*Math.PI);at.translate(-av.width,0);break}drawImageIOSFix(at,al,aw.srcX!=null?aw.srcX:0,aw.srcY!=null?aw.srcY:0,aw.srcWidth,aw.srcHeight,aw.trgX!=null?aw.trgX:0,aw.trgY!=null?aw.trgY:0,aw.trgWidth,aw.trgHeight);var ar=av.toDataURL("image/png");if(ao!=null){return ao(ar,av)}})};if(ao!=null){al.onerror=ao}return al.src=ai.dataURL}},{key:"processQueue",value:function m(){var ak=this.options.parallelUploads;var ah=this.getUploadingFiles().length;var ai=ah;if(ah>=ak){return}var aj=this.getQueuedFiles();if(!(aj.length>0)){return}if(this.options.uploadMultiple){return this.processFiles(aj.slice(0,ak-ah))}else{while(ai<ak){if(!aj.length){return}this.processFile(aj.shift());ai++}}}},{key:"processFile",value:function ad(ah){return this.processFiles([ah])}},{key:"processFiles",value:function U(ak){for(var al=ak,ai=true,aj=0,al=ai?al:al[Symbol.iterator]();;){var am;if(ai){if(aj>=al.length){break}am=al[aj++]}else{aj=al.next();if(aj.done){break}am=aj.value}var ah=am;ah.processing=true;ah.status=I.UPLOADING;this.emit("processing",ah)}if(this.options.uploadMultiple){this.emit("processingmultiple",ak)}return this.uploadFiles(ak)}},{key:"_getFilesWithXhr",value:function v(ai){var ah=void 0;return ah=this.files.filter(function(aj){return aj.xhr===ai}).map(function(aj){return aj})}},{key:"cancelUpload",value:function D(aj){if(aj.status===I.UPLOADING){var at=this._getFilesWithXhr(aj.xhr);for(var ai=at,aq=true,al=0,ai=aq?ai:ai[Symbol.iterator]();;){var ao;if(aq){if(al>=ai.length){break}ao=ai[al++]}else{al=ai.next();if(al.done){break}ao=al.value}var am=ao;am.status=I.CANCELED}if(typeof aj.xhr!=="undefined"){aj.xhr.abort()}for(var ah=at,an=true,ak=0,ah=an?ah:ah[Symbol.iterator]();;){var ap;if(an){if(ak>=ah.length){break}ap=ah[ak++]}else{ak=ah.next();if(ak.done){break}ap=ak.value}var ar=ap;this.emit("canceled",ar)}if(this.options.uploadMultiple){this.emit("canceledmultiple",at)}}else{if(aj.status===I.ADDED||aj.status===I.QUEUED){aj.status=I.CANCELED;this.emit("canceled",aj);if(this.options.uploadMultiple){this.emit("canceledmultiple",[aj])}}}if(this.options.autoProcessQueue){return this.processQueue()}}},{key:"resolveOption",value:function s(aj){if(typeof aj==="function"){for(var ak=arguments.length,ai=Array(ak>1?ak-1:0),ah=1;ah<ak;ah++){ai[ah-1]=arguments[ah]}return aj.apply(this,ai)}return aj}},{key:"uploadFile",value:function d(ah){return this.uploadFiles([ah])}},{key:"uploadFiles",value:function X(ai){var ah=this;this._transformFiles(ai,function(an){if(ai[0].upload.chunked){var am=ai[0];var ap=an[0];var aq=0;am.upload.chunks=[];var ao=function ao(){var au=0;while(am.upload.chunks[au]!==undefined){au++}if(au>=am.upload.totalChunkCount){return}aq++;var ar=au*ah.options.chunkSize;var at=Math.min(ar+ah.options.chunkSize,am.size);var av={name:ah._getParamName(0),data:ap.webkitSlice?ap.webkitSlice(ar,at):ap.slice(ar,at),filename:am.upload.filename,chunkIndex:au};am.upload.chunks[au]={file:am,index:au,dataBlock:av,status:I.UPLOADING,progress:0,retries:0};ah._uploadData(ai,[av])};am.upload.finishedChunkUpload=function(at){var ar=true;at.status=I.SUCCESS;at.dataBlock=null;for(var au=0;au<am.upload.totalChunkCount;au++){if(am.upload.chunks[au]===undefined){return ao()}if(am.upload.chunks[au].status!==I.SUCCESS){ar=false}}if(ar){ah.options.chunksUploaded(am,function(){ah._finished(ai,"",null)})}};if(ah.options.parallelChunkUploads){for(var al=0;al<am.upload.totalChunkCount;al++){ao()}}else{ao()}}else{var aj=[];for(var ak=0;ak<ai.length;ak++){aj[ak]={name:ah._getParamName(ak),data:an[ak],filename:ai[ak].upload.filename}}ah._uploadData(ai,aj)}})}},{key:"_getChunk",value:function C(ai,aj){for(var ah=0;ah<ai.upload.totalChunkCount;ah++){if(ai.upload.chunks[ah]!==undefined&&ai.upload.chunks[ah].xhr===aj){return ai.upload.chunks[ah]}}}},{key:"_uploadData",value:function g(ar,ai){var aq=this;var aB=new XMLHttpRequest();for(var ao=ar,aA=true,am=0,ao=aA?ao:ao[Symbol.iterator]();;){var aD;if(aA){if(am>=ao.length){break}aD=ao[am++]}else{am=ao.next();if(am.done){break}aD=am.value}var aC=aD;aC.xhr=aB}if(ar[0].upload.chunked){ar[0].upload.chunks[ai[0].chunkIndex].xhr=aB}var an=this.resolveOption(this.options.method,ar);var ap=this.resolveOption(this.options.url,ar);aB.open(an,ap,true);aB.timeout=this.resolveOption(this.options.timeout,ar);aB.withCredentials=!!this.options.withCredentials;aB.onload=function(aI){aq._finishedUploading(ar,aB,aI)};aB.onerror=function(){aq._handleUploadError(ar,aB)};var au=aB.upload!=null?aB.upload:aB;au.onprogress=function(aI){return aq._updateFilesUploadProgress(ar,aB,aI)};var aj={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};if(this.options.headers){I.extend(aj,this.options.headers)}for(var aH in aj){var az=aj[aH];if(az){aB.setRequestHeader(aH,az)}}var av=new FormData();if(this.options.params){var aF=this.options.params;if(typeof aF==="function"){aF=aF.call(this,ar,aB,ar[0].upload.chunked?this._getChunk(ar[0],aB):null)}for(var aE in aF){var at=aF[aE];av.append(aE,at)}}for(var al=ar,ax=true,ak=0,al=ax?al:al[Symbol.iterator]();;){var ay;if(ax){if(ak>=al.length){break}ay=al[ak++]}else{ak=al.next();if(ak.done){break}ay=ak.value}var aG=ay;this.emit("sending",aG,aB,av)}if(this.options.uploadMultiple){this.emit("sendingmultiple",ar,aB,av)}this._addFormElementData(av);for(var aw=0;aw<ai.length;aw++){var ah=ai[aw];av.append(ah.name,ah.data,ah.filename)}this.submitRequest(aB,av,ar)}},{key:"_transformFiles",value:function i(al,ai){var aj=this;var am=[];var ah=0;var an=function an(ao){aj.options.transformFile.call(aj,al[ao],function(ap){am[ao]=ap;if(++ah===al.length){ai(am)}})};for(var ak=0;ak<al.length;ak++){an(ak)}}},{key:"_addFormElementData",value:function p(aj){if(this.element.tagName==="FORM"){for(var au=this.element.querySelectorAll("input, textarea, select, button"),an=true,ak=0,au=an?au:au[Symbol.iterator]();;){var ap;if(an){if(ak>=au.length){break}ap=au[ak++]}else{ak=au.next();if(ak.done){break}ap=ak.value}var ar=ap;var aq=ar.getAttribute("name");var ah=ar.getAttribute("type");if(ah){ah=ah.toLowerCase()}if(typeof aq==="undefined"||aq===null){continue}if(ar.tagName==="SELECT"&&ar.hasAttribute("multiple")){for(var at=ar.options,al=true,ai=0,at=al?at:at[Symbol.iterator]();;){var am;if(al){if(ai>=at.length){break}am=at[ai++]}else{ai=at.next();if(ai.done){break}am=ai.value}var ao=am;if(ao.selected){aj.append(aq,ao.value)}}}else{if(!ah||ah!=="checkbox"&&ah!=="radio"||ar.checked){aj.append(aq,ar.value)}}}}}},{key:"_updateFilesUploadProgress",value:function ag(aB,aI,aK){var aF=void 0;if(typeof aK!=="undefined"){aF=100*aK.loaded/aK.total;if(aB[0].upload.chunked){var aL=aB[0];var aJ=this._getChunk(aL,aI);aJ.progress=aF;aJ.total=aK.total;aJ.bytesSent=aK.loaded;var aH=0,at=void 0,aM=void 0;aL.upload.progress=0;aL.upload.total=0;aL.upload.bytesSent=0;for(var aE=0;aE<aL.upload.totalChunkCount;aE++){if(aL.upload.chunks[aE]!==undefined&&aL.upload.chunks[aE].progress!==undefined){aL.upload.progress+=aL.upload.chunks[aE].progress;aL.upload.total+=aL.upload.chunks[aE].total;aL.upload.bytesSent+=aL.upload.chunks[aE].bytesSent}}aL.upload.progress=aL.upload.progress/aL.upload.totalChunkCount}else{for(var ah=aB,aC=true,ax=0,ah=aC?ah:ah[Symbol.iterator]();;){var aD;if(aC){if(ax>=ah.length){break}aD=ah[ax++]}else{ax=ah.next();if(ax.done){break}aD=ax.value}var aq=aD;aq.upload.progress=aF;aq.upload.total=aK.total;aq.upload.bytesSent=aK.loaded}}for(var av=aB,az=true,ar=0,av=az?av:av[Symbol.iterator]();;){var aA;if(az){if(ar>=av.length){break}aA=av[ar++]}else{ar=av.next();if(ar.done){break}aA=ar.value}var ak=aA;this.emit("uploadprogress",ak,ak.upload.progress,ak.upload.bytesSent)}}else{var aG=true;aF=100;for(var ap=aB,aw=true,am=0,ap=aw?ap:ap[Symbol.iterator]();;){var ay;if(aw){if(am>=ap.length){break}ay=ap[am++]}else{am=ap.next();if(am.done){break}ay=am.value}var aj=ay;if(aj.upload.progress!==100||aj.upload.bytesSent!==aj.upload.total){aG=false}aj.upload.progress=aF;aj.upload.bytesSent=aj.upload.total}if(aG){return}for(var ao=aB,au=true,al=0,ao=au?ao:ao[Symbol.iterator]();;){var an;if(au){if(al>=ao.length){break}an=ao[al++]}else{al=ao.next();if(al.done){break}an=al.value}var ai=an;this.emit("uploadprogress",ai,aF,ai.upload.bytesSent)}}}},{key:"_finishedUploading",value:function Z(aj,al,ak){var ah=void 0;if(aj[0].status===I.CANCELED){return}if(al.readyState!==4){return}if(al.responseType!=="arraybuffer"&&al.responseType!=="blob"){ah=al.responseText;if(al.getResponseHeader("content-type")&&~al.getResponseHeader("content-type").indexOf("application/json")){try{ah=JSON.parse(ah)}catch(ai){ak=ai;ah="Invalid JSON response from server."}}}this._updateFilesUploadProgress(aj);if(!(200<=al.status&&al.status<300)){this._handleUploadError(aj,al,ah)}else{if(aj[0].upload.chunked){aj[0].upload.finishedChunkUpload(this._getChunk(aj[0],al))}else{this._finished(aj,ah,ak)}}}},{key:"_handleUploadError",value:function y(ah,ap,am){if(ah[0].status===I.CANCELED){return}if(ah[0].upload.chunked&&this.options.retryChunks){var ao=this._getChunk(ah[0],ap);if(ao.retries++<this.options.retryChunksLimit){this._uploadData(ah,[ao.dataBlock]);return}else{console.warn("Retried this chunk too often. Giving up.")}}for(var an=ah,al=true,ai=0,an=al?an:an[Symbol.iterator]();;){var aj;if(al){if(ai>=an.length){break}aj=an[ai++]}else{ai=an.next();if(ai.done){break}aj=ai.value}var ak=aj;this._errorProcessing(ah,am||this.options.dictResponseError.replace("{{statusCode}}",ap.status),ap)}}},{key:"submitRequest",value:function q(aj,ai,ah){aj.send(ai)}},{key:"_finished",value:function H(ak,al,an){for(var am=ak,aj=true,ai=0,am=aj?am:am[Symbol.iterator]();;){var ao;if(aj){if(ai>=am.length){break}ao=am[ai++]}else{ai=am.next();if(ai.done){break}ao=ai.value}var ah=ao;ah.status=I.SUCCESS;this.emit("success",ah,al,an);this.emit("complete",ah)}if(this.options.uploadMultiple){this.emit("successmultiple",ak,al,an);this.emit("completemultiple",ak)}if(this.options.autoProcessQueue){return this.processQueue()}}},{key:"_errorProcessing",value:function R(al,ak,ao){for(var am=al,aj=true,ai=0,am=aj?am:am[Symbol.iterator]();;){var an;if(aj){if(ai>=am.length){break}an=am[ai++]}else{ai=am.next();if(ai.done){break}an=ai.value}var ah=an;ah.status=I.ERROR;this.emit("error",ah,ak,ao);this.emit("complete",ah)}if(this.options.uploadMultiple){this.emit("errormultiple",al,ak,ao);this.emit("completemultiple",al)}if(this.options.autoProcessQueue){return this.processQueue()}}}],[{key:"uuidv4",value:function o(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(aj){var ai=Math.random()*16|0,ah=aj==="x"?ai:ai&3|8;return ah.toString(16)})}}]);return I}(Emitter);Dropzone.initClass();Dropzone.version="5.4.0";Dropzone.options={};Dropzone.optionsForElement=function(a){if(a.getAttribute("id")){return Dropzone.options[camelize(a.getAttribute("id"))]}else{return undefined}};Dropzone.instances=[];Dropzone.forElement=function(a){if(typeof a==="string"){a=document.querySelector(a)}if((a!=null?a.dropzone:undefined)==null){throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.")}return a.dropzone};Dropzone.autoDiscover=true;Dropzone.discover=function(){var a=void 0;if(document.querySelectorAll){a=document.querySelectorAll(".dropzone")}else{a=[];var b=function b(c){return function(){var i=[];for(var h=c,f=true,e=0,h=f?h:h[Symbol.iterator]();;){var d;if(f){if(e>=h.length){break}d=h[e++]}else{e=h.next();if(e.done){break}d=e.value}var g=d;if(/(^| )dropzone($| )/.test(g.className)){i.push(a.push(g))}else{i.push(undefined)}}return i}()};b(document.getElementsByTagName("div"));b(document.getElementsByTagName("form"))}return function(){var e=[];for(var c=a,h=true,g=0,c=h?c:c[Symbol.iterator]();;){var d;if(h){if(g>=c.length){break}d=c[g++]}else{g=c.next();if(g.done){break}d=g.value}var f=d;if(Dropzone.optionsForElement(f)!==false){e.push(new Dropzone(f))}else{e.push(undefined)}}return e}()};Dropzone.blacklistedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i];Dropzone.isBrowserSupported=function(){var b=true;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector){if(!("classList" in document.createElement("a"))){b=false}else{for(var a=Dropzone.blacklistedBrowsers,f=true,e=0,a=f?a:a[Symbol.iterator]();;){var d;if(f){if(e>=a.length){break}d=a[e++]}else{e=a.next();if(e.done){break}d=e.value}var c=d;if(c.test(navigator.userAgent)){b=false;continue}}}}else{b=false}return b};Dropzone.dataURItoBlob=function(f){var c=atob(f.split(",")[1]);var d=f.split(",")[0].split(":")[1].split(";")[0];var b=new ArrayBuffer(c.length);var g=new Uint8Array(b);for(var h=0,e=c.length,a=0<=e;a?h<=e:h>=e;a?h++:h--){g[h]=c.charCodeAt(h)}return new Blob([b],{type:d})};var without=function without(b,a){return b.filter(function(c){return c!==a}).map(function(c){return c})};var camelize=function camelize(a){return a.replace(/[\-_](\w)/g,function(b){return b.charAt(1).toUpperCase()})};Dropzone.createElement=function(a){var b=document.createElement("div");b.innerHTML=a;return b.childNodes[0]};Dropzone.elementInside=function(b,a){if(b===a){return true}while(b=b.parentNode){if(b===a){return true}}return false};Dropzone.getElement=function(a,b){var c=void 0;if(typeof a==="string"){c=document.querySelector(a)}else{if(a.nodeType!=null){c=a}}if(c==null){throw new Error("Invalid `"+b+"` option provided. Please provide a CSS selector or a plain HTML element.")}return c};Dropzone.getElements=function(l,j){var k=void 0,i=void 0;if(l instanceof Array){i=[];try{for(var b=l,h=true,f=0,b=h?b:b[Symbol.iterator]();;){if(h){if(f>=b.length){break}k=b[f++]}else{f=b.next();if(f.done){break}k=f.value}i.push(this.getElement(k,j))}}catch(c){i=null}}else{if(typeof l==="string"){i=[];for(var a=document.querySelectorAll(l),g=true,d=0,a=g?a:a[Symbol.iterator]();;){if(g){if(d>=a.length){break}k=a[d++]}else{d=a.next();if(d.done){break}k=d.value}i.push(k)}}else{if(l.nodeType!=null){i=[l]}}}if(i==null||!i.length){throw new Error("Invalid `"+j+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.")}return i};Dropzone.confirm=function(b,a,c){if(window.confirm(b)){return a()}else{if(c!=null){return c()}}};Dropzone.isValidFile=function(e,b){if(!b){return true}b=b.split(",");var c=e.type;var d=c.replace(/\/.*$/,"");for(var f=b,i=true,h=0,f=i?f:f[Symbol.iterator]();;){var a;if(i){if(h>=f.length){break}a=f[h++]}else{h=f.next();if(h.done){break}a=h.value}var g=a;g=g.trim();if(g.charAt(0)==="."){if(e.name.toLowerCase().indexOf(g.toLowerCase(),e.name.length-g.length)!==-1){return true}}else{if(/\/\*$/.test(g)){if(d===g.replace(/\/.*$/,"")){return true}}else{if(c===g){return true}}}}return false};if(typeof jQuery!=="undefined"&&jQuery!==null){jQuery.fn.dropzone=function(a){return this.each(function(){return new Dropzone(this,a)})}}if(typeof module!=="undefined"&&module!==null){module.exports=Dropzone}else{window.Dropzone=Dropzone}Dropzone.ADDED="added";Dropzone.QUEUED="queued";Dropzone.ACCEPTED=Dropzone.QUEUED;Dropzone.UPLOADING="uploading";Dropzone.PROCESSING=Dropzone.UPLOADING;Dropzone.CANCELED="canceled";Dropzone.ERROR="error";Dropzone.SUCCESS="success";var detectVerticalSquash=function detectVerticalSquash(k){var h=k.naturalWidth;var e=k.naturalHeight;var g=document.createElement("canvas");g.width=1;g.height=e;var f=g.getContext("2d");f.drawImage(k,0,0);var d=f.getImageData(1,0,1,e),j=d.data;var b=0;var l=e;var c=e;while(c>b){var i=j[(c-1)*4+3];if(i===0){l=c}else{b=c}c=l+b>>1}var a=c/e;if(a===0){return 1}else{return a}};var drawImageIOSFix=function drawImageIOSFix(e,i,c,b,d,j,g,f,h,a){var k=detectVerticalSquash(i);return e.drawImage(i,c,b,d,j,g,f,h,a/k)};var ExifRestore=function(){function f(){_classCallCheck(this,f)}_createClass(f,null,[{key:"initClass",value:function b(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function i(l){var j="";var s=undefined;var q=undefined;var o="";var r=undefined;var p=undefined;var n=undefined;var m="";var k=0;while(true){s=l[k++];q=l[k++];o=l[k++];r=s>>2;p=(s&3)<<4|q>>4;n=(q&15)<<2|o>>6;m=o&63;if(isNaN(q)){n=m=64}else{if(isNaN(o)){m=64}}j=j+this.KEY_STR.charAt(r)+this.KEY_STR.charAt(p)+this.KEY_STR.charAt(n)+this.KEY_STR.charAt(m);s=q=o="";r=p=n=m="";if(!(k<l.length)){break}}return j}},{key:"restore",value:function g(m,l){if(!m.match("data:image/jpeg;base64,")){return l}var k=this.decode64(m.replace("data:image/jpeg;base64,",""));var n=this.slice2Segments(k);var j=this.exifManipulation(l,n);return"data:image/jpeg;base64,"+this.encode64(j)}},{key:"exifManipulation",value:function c(l,j){var m=this.getExifArray(j);var n=this.insertExif(l,m);var k=new Uint8Array(n);return k}},{key:"getExifArray",value:function e(k){var j=undefined;var l=0;while(l<k.length){j=k[l];if(j[0]===255&j[1]===225){return j}l++}return[]}},{key:"insertExif",value:function h(o,p){var n=o.replace("data:image/jpeg;base64,","");var j=this.decode64(n);var q=j.indexOf(255,3);var l=j.slice(0,q);var k=j.slice(q);var m=l;m=m.concat(p);m=m.concat(k);return m}},{key:"slice2Segments",value:function a(o){var l=0;var j=[];while(true){var m;if(o[l]===255&o[l+1]===218){break}if(o[l]===255&o[l+1]===216){l+=2}else{m=o[l+2]*256+o[l+3];var k=l+m+2;var n=o.slice(l,k);j.push(n);l=k}if(l>o.length){break}}return j}},{key:"decode64",value:function d(n){var l="";var u=undefined;var s=undefined;var q="";var t=undefined;var r=undefined;var p=undefined;var o="";var m=0;var k=[];var j=/[^A-Za-z0-9\+\/\=]/g;if(j.exec(n)){console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding.")}n=n.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(true){t=this.KEY_STR.indexOf(n.charAt(m++));r=this.KEY_STR.indexOf(n.charAt(m++));p=this.KEY_STR.indexOf(n.charAt(m++));o=this.KEY_STR.indexOf(n.charAt(m++));u=t<<2|r>>4;s=(r&15)<<4|p>>2;q=(p&3)<<6|o;k.push(u);if(p!==64){k.push(s)}if(o!==64){k.push(q)}u=s=q="";t=r=p=o="";if(!(m<n.length)){break}}return k}}]);return f}();ExifRestore.initClass();var contentLoaded=function contentLoaded(i,a){var h=false;var l=true;var c=i.document;var b=c.documentElement;var f=c.addEventListener?"addEventListener":"attachEvent";var d=c.addEventListener?"removeEventListener":"detachEvent";var g=c.addEventListener?"":"on";var e=function e(m){if(m.type==="readystatechange"&&c.readyState!=="complete"){return}(m.type==="load"?i:c)[d](g+m.type,e,false);if(!h&&(h=true)){return a.call(i,m.type||m)}};var j=function j(){try{b.doScroll("left")}catch(m){setTimeout(j,50);return}return e("poll")};if(c.readyState!=="complete"){if(c.createEventObject&&b.doScroll){try{l=!i.frameElement}catch(k){}if(l){j()}}c[f](g+"DOMContentLoaded",e,false);c[f](g+"readystatechange",e,false);return i[f](g+"load",e,false)}};Dropzone._autoDiscoverFunction=function(){if(Dropzone.autoDiscover){return Dropzone.discover()}};contentLoaded(window,Dropzone._autoDiscoverFunction);function __guard__(b,a){return typeof b!=="undefined"&&b!==null?a(b):undefined}function __guardMethod__(a,b,c){if(typeof a!=="undefined"&&a!==null&&typeof a[b]==="function"){return c(a,b)}else{return undefined}};